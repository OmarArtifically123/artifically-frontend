/**
 * ============================================================================
 * UNIFIED DESIGN TOKENS - SINGLE SOURCE OF TRUTH
 * ============================================================================
 * Production-ready theme system for the AI Automation Marketplace
 *
 * Supports Three Modes:
 * - Light Mode: Clean, accessible, professional
 * - Dark Mode: Modern, premium, sophisticated (DEFAULT)
 * - Contrast Mode: WCAG AAA compliant, maximum accessibility
 *
 * Architecture Principles:
 * - Semantic tokens (not implementation-specific)
 * - Theme-aware with [data-theme] attribute
 * - Accessibility-first (WCAG AA minimum, AAA for contrast mode)
 * - Performance-optimized with CSS custom properties
 * - Zero duplicates, single source of truth
 *
 * Usage Guidelines:
 * ✅ DO: Use semantic tokens → var(--text-primary), var(--bg-card)
 * ❌ DON'T: Use hardcoded colors → #ffffff, rgb(255,255,255)
 * ✅ DO: Use status colors → var(--status-success)
 * ❌ DON'T: Use Tailwind color utilities → text-green-500
 *
 * Theme Switching:
 * Apply [data-theme="light|dark|contrast"] to <html> element
 * ============================================================================
 */

@layer design-tokens {

  /* ==========================================================================
     BRAND COLORS - Theme Independent Foundation
     ========================================================================== */

  :root {
    /* Brand Color HSL Components (for calculations) */
    --brand-primary-h: 264;
    --brand-primary-s: 32%;
    --brand-primary-l: 65%;
    --brand-secondary-h: 192;
    --brand-secondary-s: 28%;
    --brand-secondary-l: 75%;
    --brand-accent-h: 330;
    --brand-accent-s: 26%;
    --brand-accent-l: 70%;

    /* Animation & Transition Timings */
    --transition-instant: 120ms;
    --transition-fast: 200ms;
    --transition-base: 300ms;
    --transition-slow: 500ms;
    --transition-timing: cubic-bezier(0.4, 0, 0.2, 1);

    /* Border Radius Scale */
    --radius-xs: 0.25rem;     /* 4px */
    --radius-sm: 0.375rem;    /* 6px */
    --radius-md: 0.5rem;      /* 8px */
    --radius-lg: 0.75rem;     /* 12px */
    --radius-xl: 1rem;        /* 16px */
    --radius-2xl: 1.5rem;     /* 24px */
    --radius-full: 9999px;

    /* Z-Index Scale */
    --z-base: 0;
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
    --z-notification: 1080;
  }

  /* ==========================================================================
     DARK MODE (DEFAULT THEME)
     Modern, premium, sophisticated - optimized for long reading sessions
     ========================================================================== */

  :root,
  [data-theme='dark'],
  .theme-dark {

    /* ===== Backgrounds ===== */
    --bg-primary: #050510;           /* Deep space black */
    --bg-secondary: #0f172a;         /* Slate 900 */
    --bg-tertiary: #1a1f3a;          /* Elevated surfaces */
    --bg-elevated: #1e293b;          /* Cards, modals */
    --bg-card: #0f172a;              /* Card backgrounds */
    --bg-overlay: rgba(5, 5, 16, 0.92); /* Modal overlays */
    --bg-inverse: #f8f9ff;           /* Inverse backgrounds */

    /* ===== Surface & Glass Effects ===== */
    --surface-base: #050510;
    --surface-raised: #0f172a;
    --surface-overlay: rgba(0, 0, 0, 0.8);
    --glass-bg: rgba(15, 23, 42, 0.35);
    --glass-border: rgba(148, 163, 184, 0.18);
    --glass-blur: blur(24px);

    /* ===== Text Colors ===== */
    --text-primary: #ffffff;         /* Pure white - 18.5:1 contrast */
    --text-secondary: #e2e8f0;       /* Slate 200 - 14.2:1 contrast */
    --text-tertiary: #cbd5e1;        /* Slate 300 - 11.1:1 contrast */
    --text-muted: #94a3b8;           /* Slate 400 - 6.8:1 contrast */
    --text-inverse: #0f172a;         /* For light backgrounds */
    --text-link: #7dd3fc;            /* Sky 300 - 11.8:1 contrast */
    --text-link-hover: #bae6fd;      /* Sky 200 - 15.4:1 contrast */
    --text-on-brand: #ffffff;        /* Text on brand colors */
    --text-disabled: rgba(148, 163, 184, 0.4);

    /* ===== Borders ===== */
    --border-default: rgba(148, 163, 184, 0.18);  /* Subtle borders */
    --border-strong: rgba(148, 163, 184, 0.35);   /* Emphasized borders */
    --border-subtle: rgba(148, 163, 184, 0.1);    /* Very subtle */
    --border-focus: rgba(122, 181, 255, 0.5);     /* Focus rings */
    --border-inverse: rgba(15, 23, 42, 0.35);

    /* ===== Brand Colors (Dark Mode Adapted) ===== */
    --brand-primary: oklch(0.65 0.32 264);        /* Vibrant blue-purple */
    --brand-primary-hover: oklch(0.70 0.32 264);  /* Lighter on hover */
    --brand-primary-active: oklch(0.60 0.32 264); /* Darker on active */
    --brand-secondary: oklch(0.75 0.28 192);      /* Cyan accent */
    --brand-accent: oklch(0.70 0.26 330);         /* Pink energy */
    --brand-glow: oklch(0.75 0.28 192);           /* Glow effects */
    --brand-energy: oklch(0.70 0.26 330);         /* Energy highlights */
    --brand-depth: #0a0a0f;                       /* Deep backgrounds */
    --brand-muted: #1a1a24;                       /* Muted backgrounds */

    /* ===== Interactive States ===== */
    --interactive-hover: rgba(148, 163, 184, 0.12);     /* Hover backgrounds */
    --interactive-active: rgba(148, 163, 184, 0.20);    /* Active/pressed */
    --interactive-focus: rgba(122, 181, 255, 0.3);      /* Focus backgrounds */
    --interactive-disabled: rgba(148, 163, 184, 0.08);  /* Disabled backgrounds */
    --interactive-disabled-text: rgba(148, 163, 184, 0.4);

    /* ===== Status Colors ===== */
    /* Success - Green */
    --status-success: oklch(0.72 0.24 145);         /* #10b981 equivalent */
    --status-success-bg: rgba(16, 185, 129, 0.12);  /* Subtle background */
    --status-success-border: rgba(16, 185, 129, 0.3);
    --status-success-hover: oklch(0.78 0.24 145);

    /* Warning - Amber */
    --status-warning: oklch(0.75 0.22 85);          /* #f59e0b equivalent */
    --status-warning-bg: rgba(245, 158, 11, 0.12);
    --status-warning-border: rgba(245, 158, 11, 0.3);
    --status-warning-hover: oklch(0.80 0.22 85);

    /* Error - Red */
    --status-error: oklch(0.62 0.28 25);            /* #ef4444 equivalent */
    --status-error-bg: rgba(239, 68, 68, 0.12);
    --status-error-border: rgba(239, 68, 68, 0.3);
    --status-error-hover: oklch(0.68 0.28 25);

    /* Info - Blue */
    --status-info: oklch(0.78 0.2 240);             /* #4d9dff equivalent */
    --status-info-bg: rgba(77, 157, 255, 0.12);
    --status-info-border: rgba(77, 157, 255, 0.3);
    --status-info-hover: oklch(0.83 0.2 240);

    /* ===== Shadows ===== */
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.25);
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.45);
    --shadow-xl: 0 16px 32px rgba(0, 0, 0, 0.5);
    --shadow-2xl: 0 24px 48px rgba(0, 0, 0, 0.6);
    --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.3);
    --shadow-glow: 0 0 40px oklch(0.65 0.32 264 / 0.35);
    --shadow-glow-strong: 0 0 60px oklch(0.65 0.32 264 / 0.5);
    --shadow-ambient: 0 12px 30px rgba(5, 5, 16, 0.4);

    /* ===== Gradients ===== */
    --gradient-primary: linear-gradient(135deg,
      oklch(0.65 0.32 264) 0%,
      oklch(0.75 0.28 192) 100%
    );
    --gradient-accent: linear-gradient(135deg,
      #0ea5e9 0%,
      #7c3aed 50%,
      #ec4899 100%
    );
    --gradient-hero: linear-gradient(130deg,
      oklch(0.6 0.32 264) 0%,
      oklch(0.65 0.32 264) 40%,
      oklch(0.75 0.28 192) 70%,
      oklch(0.72 0.26 330) 100%
    );
    --gradient-mesh: radial-gradient(
      circle at 20% 50%,
      oklch(0.65 0.32 264 / 0.3) 0%,
      transparent 50%
    ),
    radial-gradient(
      circle at 80% 80%,
      oklch(0.75 0.28 192 / 0.25) 0%,
      transparent 50%
    );

    /* ===== Logo & Brand Assets ===== */
    --logo-mark: var(--text-primary);
    --logo-word: var(--text-primary);
    --logo-accent: var(--brand-primary);
    --logo-node-opacity: 0;

    /* ===== Focus States ===== */
    --focus-ring: 0 0 0 3px rgba(122, 181, 255, 0.4);
    --focus-ring-offset: 2px;
    --focus-outline-color: rgba(122, 181, 255, 0.7);
    --focus-outline-width: 2px;
  }

  /* ==========================================================================
     LIGHT MODE
     Clean, accessible, professional - optimized for bright environments
     WCAG AAA contrast ratios (7:1 minimum)
     ========================================================================== */

  [data-theme='light'],
  .theme-light {

    /* ===== Backgrounds ===== */
    --bg-primary: #ffffff;           /* Pure white */
    --bg-secondary: #f8fafc;         /* Slate 50 */
    --bg-tertiary: #f1f5f9;          /* Slate 100 */
    --bg-elevated: #ffffff;          /* Cards, modals */
    --bg-card: #ffffff;              /* Card backgrounds */
    --bg-overlay: rgba(255, 255, 255, 0.95); /* Modal overlays */
    --bg-inverse: #0f172a;           /* Dark backgrounds */

    /* ===== Surface & Glass Effects ===== */
    --surface-base: #ffffff;
    --surface-raised: #f8fafc;
    --surface-overlay: rgba(0, 0, 0, 0.5);
    --glass-bg: rgba(255, 255, 255, 0.45);
    --glass-border: rgba(15, 23, 42, 0.1);
    --glass-blur: blur(24px);

    /* ===== Text Colors ===== */
    --text-primary: #000000;         /* Pure black - 21:1 contrast */
    --text-secondary: #0f172a;       /* Slate 900 - 15.8:1 contrast */
    --text-tertiary: #1e293b;        /* Slate 800 - 12.6:1 contrast */
    --text-muted: #475569;           /* Slate 600 - 8.6:1 contrast */
    --text-inverse: #ffffff;         /* For dark backgrounds */
    --text-link: #0c4a9e;            /* Blue - 7.5:1 contrast */
    --text-link-hover: #083573;      /* Darker blue - 10.8:1 contrast */
    --text-on-brand: #ffffff;        /* Text on brand colors */
    --text-disabled: rgba(15, 23, 42, 0.35);

    /* ===== Borders ===== */
    --border-default: #e2e8f0;       /* Slate 200 */
    --border-strong: #cbd5e1;        /* Slate 300 */
    --border-subtle: #f1f5f9;        /* Slate 100 */
    --border-focus: rgba(22, 95, 215, 0.4);  /* Blue focus */
    --border-inverse: rgba(148, 163, 184, 0.25);

    /* ===== Brand Colors (Light Mode Adapted) ===== */
    --brand-primary: #1f7eff;        /* Bright blue */
    --brand-primary-hover: #165fd7;  /* Darker on hover */
    --brand-primary-active: #1048aa; /* Darkest on active */
    --brand-secondary: #7a73ff;      /* Purple */
    --brand-accent: #ec4899;         /* Pink */
    --brand-glow: #7dd3fc;           /* Sky blue */
    --brand-energy: #ec4899;         /* Pink energy */
    --brand-depth: #f8f9ff;          /* Very light blue */
    --brand-muted: #e2e8f0;          /* Slate 200 */

    /* ===== Interactive States ===== */
    --interactive-hover: rgba(15, 23, 42, 0.05);      /* Hover backgrounds */
    --interactive-active: rgba(15, 23, 42, 0.10);     /* Active/pressed */
    --interactive-focus: rgba(22, 95, 215, 0.2);      /* Focus backgrounds */
    --interactive-disabled: rgba(15, 23, 42, 0.03);   /* Disabled backgrounds */
    --interactive-disabled-text: rgba(15, 23, 42, 0.35);

    /* ===== Status Colors ===== */
    /* Success - Green */
    --status-success: #10b981;                 /* Emerald 500 */
    --status-success-bg: #ecfdf5;              /* Emerald 50 */
    --status-success-border: #6ee7b7;          /* Emerald 300 */
    --status-success-hover: #059669;           /* Emerald 600 */

    /* Warning - Amber */
    --status-warning: #f59e0b;                 /* Amber 500 */
    --status-warning-bg: #fffbea;              /* Amber 50 */
    --status-warning-border: #fcd34d;          /* Amber 300 */
    --status-warning-hover: #d97706;           /* Amber 600 */

    /* Error - Red */
    --status-error: #ef4444;                   /* Red 500 */
    --status-error-bg: #fef2f2;                /* Red 50 */
    --status-error-border: #fca5a5;            /* Red 300 */
    --status-error-hover: #dc2626;             /* Red 600 */

    /* Info - Blue */
    --status-info: #4d9dff;                    /* Blue 400 */
    --status-info-bg: #eef5ff;                 /* Blue 50 */
    --status-info-border: #93c5fd;             /* Blue 300 */
    --status-info-hover: #2563eb;              /* Blue 600 */

    /* ===== Shadows ===== */
    --shadow-xs: 0 1px 2px rgba(15, 23, 42, 0.05);
    --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.06);
    --shadow-md: 0 4px 8px rgba(15, 23, 42, 0.10);
    --shadow-lg: 0 8px 16px rgba(15, 23, 42, 0.12);
    --shadow-xl: 0 16px 32px rgba(15, 23, 42, 0.15);
    --shadow-2xl: 0 24px 48px rgba(15, 23, 42, 0.18);
    --shadow-inner: inset 0 2px 4px rgba(15, 23, 42, 0.06);
    --shadow-glow: 0 0 40px rgba(31, 126, 255, 0.25);
    --shadow-glow-strong: 0 0 60px rgba(31, 126, 255, 0.35);
    --shadow-ambient: 0 12px 30px rgba(15, 23, 42, 0.14);

    /* ===== Gradients ===== */
    --gradient-primary: linear-gradient(135deg,
      #1f7eff 0%,
      #7a73ff 100%
    );
    --gradient-accent: linear-gradient(135deg,
      #0ea5e9 0%,
      #7c3aed 50%,
      #ec4899 100%
    );
    --gradient-hero: linear-gradient(130deg,
      #1f7eff 0%,
      #7a73ff 50%,
      #ec4899 100%
    );
    --gradient-mesh: radial-gradient(
      circle at 20% 50%,
      rgba(31, 126, 255, 0.15) 0%,
      transparent 50%
    ),
    radial-gradient(
      circle at 80% 80%,
      rgba(122, 115, 255, 0.12) 0%,
      transparent 50%
    );

    /* ===== Logo & Brand Assets ===== */
    --logo-mark: var(--text-primary);
    --logo-word: var(--text-primary);
    --logo-accent: var(--brand-primary);
    --logo-node-opacity: 0;

    /* ===== Focus States ===== */
    --focus-ring: 0 0 0 3px rgba(22, 95, 215, 0.3);
    --focus-ring-offset: 2px;
    --focus-outline-color: rgba(22, 95, 215, 0.6);
    --focus-outline-width: 2px;
  }

  /* ==========================================================================
     CONTRAST MODE (HIGH CONTRAST - WCAG AAA)
     Maximum accessibility, intentionally designed for users with low vision

     Design Principles:
     - Pure black (#000) and white (#fff) only
     - NO gradients (solid colors only)
     - NO shadows (reduce visual complexity)
     - NO transparency (fully opaque)
     - THICK borders (2-3px minimum)
     - UNDERLINED links (always)
     - ENHANCED focus states (3px solid)
     - BRIGHT accent colors (maximum contrast)
     ========================================================================== */

  [data-theme='contrast'],
  .theme-contrast {

    /* ===== Backgrounds ===== */
    --bg-primary: #000000;           /* Pure black */
    --bg-secondary: #000000;         /* Pure black */
    --bg-tertiary: #000000;          /* Pure black */
    --bg-elevated: #000000;          /* Pure black */
    --bg-card: #000000;              /* Pure black */
    --bg-overlay: #000000;           /* Pure black */
    --bg-inverse: #ffffff;           /* Pure white */

    /* ===== Surface & Glass Effects (DISABLED) ===== */
    --surface-base: #000000;
    --surface-raised: #000000;
    --surface-overlay: #000000;
    --glass-bg: transparent;         /* No glass effect */
    --glass-border: #ffffff;
    --glass-blur: none;              /* No blur */

    /* ===== Text Colors ===== */
    --text-primary: #ffffff;         /* Pure white - 21:1 contrast */
    --text-secondary: #ffffff;       /* Pure white - 21:1 contrast */
    --text-tertiary: #ffffff;        /* Pure white - 21:1 contrast */
    --text-muted: #ffffff;           /* Pure white - 21:1 contrast */
    --text-inverse: #000000;         /* Pure black */
    --text-link: #00eaff;            /* Electric cyan - 14.2:1 contrast */
    --text-link-hover: #5ffbff;      /* Bright cyan - 16.8:1 contrast */
    --text-on-brand: #000000;        /* Black text on bright colors */
    --text-disabled: #666666;        /* Gray for disabled */

    /* ===== Borders ===== */
    --border-default: #ffffff;       /* Pure white borders */
    --border-strong: #ffffff;        /* Pure white borders */
    --border-subtle: #8a8a8a;        /* Gray for subtle borders */
    --border-focus: #00eaff;         /* Bright cyan focus */
    --border-inverse: #000000;       /* Black borders on white */

    /* ===== Brand Colors (High Contrast Versions) ===== */
    --brand-primary: #00d4ff;        /* Bright cyan */
    --brand-primary-hover: #00eaff;  /* Brighter cyan */
    --brand-primary-active: #00bfe6;  /* Slightly darker */
    --brand-secondary: #00ffe0;      /* Bright teal */
    --brand-accent: #ff00ff;         /* Magenta */
    --brand-glow: #00ffe0;           /* Bright teal */
    --brand-energy: #ff00ff;         /* Magenta */
    --brand-depth: #000000;          /* Black */
    --brand-muted: #000000;          /* Black */

    /* ===== Interactive States ===== */
    --interactive-hover: #1a1a1a;             /* Dark gray hover */
    --interactive-active: #2a2a2a;            /* Darker gray active */
    --interactive-focus: #00eaff;             /* Bright cyan focus */
    --interactive-disabled: #0a0a0a;          /* Almost black */
    --interactive-disabled-text: #666666;     /* Gray text */

    /* ===== Status Colors (Maximum Contrast) ===== */
    /* Success - Bright Green */
    --status-success: #00ff00;                /* Pure green */
    --status-success-bg: #003300;             /* Dark green bg */
    --status-success-border: #00ff00;         /* Pure green border */
    --status-success-hover: #33ff33;          /* Brighter green */

    /* Warning - Bright Yellow */
    --status-warning: #ffff00;                /* Pure yellow */
    --status-warning-bg: #333300;             /* Dark yellow bg */
    --status-warning-border: #ffff00;         /* Pure yellow border */
    --status-warning-hover: #ffff33;          /* Brighter yellow */

    /* Error - Bright Red */
    --status-error: #ff0000;                  /* Pure red */
    --status-error-bg: #330000;               /* Dark red bg */
    --status-error-border: #ff0000;           /* Pure red border */
    --status-error-hover: #ff3333;            /* Brighter red */

    /* Info - Bright Cyan */
    --status-info: #00d4ff;                   /* Bright cyan */
    --status-info-bg: #003344;                /* Dark cyan bg */
    --status-info-border: #00d4ff;            /* Bright cyan border */
    --status-info-hover: #33ddff;             /* Brighter cyan */

    /* ===== Shadows (DISABLED) ===== */
    --shadow-xs: none;
    --shadow-sm: none;
    --shadow-md: none;
    --shadow-lg: none;
    --shadow-xl: none;
    --shadow-2xl: none;
    --shadow-inner: none;
    --shadow-glow: none;
    --shadow-glow-strong: none;
    --shadow-ambient: none;

    /* ===== Gradients (DISABLED - Solid Colors Only) ===== */
    --gradient-primary: #00d4ff;     /* Solid cyan */
    --gradient-accent: #00ffe0;      /* Solid teal */
    --gradient-hero: #00d4ff;        /* Solid cyan */
    --gradient-mesh: none;           /* No mesh */

    /* ===== Logo & Brand Assets ===== */
    --logo-mark: #ffffff;
    --logo-word: #ffffff;
    --logo-accent: #00eaff;
    --logo-node-opacity: 0;

    /* ===== Focus States (Enhanced) ===== */
    --focus-ring: 0 0 0 4px #00eaff;
    --focus-ring-offset: 3px;
    --focus-outline-color: #00eaff;
    --focus-outline-width: 3px;
  }

  /* ==========================================================================
     SMOOTH THEME TRANSITIONS
     Apply smooth transitions for light/dark mode (not contrast)
     ========================================================================== */

  :root:not(.theme-contrast):not([data-theme='contrast']) *,
  [data-theme='light'] *,
  [data-theme='dark'] * {
    transition-property: background-color, color, border-color, box-shadow, opacity;
    transition-duration: var(--transition-base);
    transition-timing-function: var(--transition-timing);
  }

  /* Disable transitions on first load to prevent flash */
  html.is-loading * {
    transition: none !important;
  }

  /* ==========================================================================
     FORCED COLORS MODE (Windows High Contrast)
     Respect OS-level high contrast settings
     ========================================================================== */

  @media (forced-colors: active) {
    :root {
      --bg-primary: Canvas;
      --text-primary: CanvasText;
      --text-link: LinkText;
      --border-default: CanvasText;
      --border-focus: Highlight;
      --brand-primary: Highlight;
    }

    * {
      forced-color-adjust: auto;
    }

    *:focus {
      outline: 2px solid Highlight !important;
      outline-offset: 2px !important;
    }
  }

  /* ==========================================================================
     REDUCED MOTION
     Respect user preference for reduced motion (WCAG 2.1)
     ========================================================================== */

  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* ==========================================================================
     GLOBAL APPLICATION
     Apply theme to core HTML elements
     ========================================================================== */

  html,
  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
  }

  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
  }

  /* Paragraphs */
  p {
    color: var(--text-secondary);
  }

  /* Links */
  a {
    color: var(--text-link);
  }

  a:hover {
    color: var(--text-link-hover);
  }

  /* Sections and containers */
  main,
  section,
  article,
  aside,
  nav,
  header,
  footer {
    background-color: transparent;
    color: inherit;
  }

  /* Forms */
  input,
  textarea,
  select {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-default);
  }

  input::placeholder,
  textarea::placeholder {
    color: var(--text-muted);
  }

  /* Buttons */
  button {
    color: var(--text-primary);
    border: 1px solid var(--border-default);
  }

  /* Focus visible (modern focus management) */
  *:focus-visible {
    outline: var(--focus-outline-width) solid var(--focus-outline-color);
    outline-offset: var(--focus-ring-offset);
  }
}
