import{u as e,j as r,c as a,T as s,a as t,p as o,t as n}from"./index-1DIB5rGU.js";import{r as i,u as d}from"./vendor-DO1dN4GI.js";import"./performance-Bp-PRVTn.js";import"./api-7w58lNoV.js";import"./graphql-MaKh5oBd.js";const l=a(e=>r.jsx("button",{className:"btn btn-primary",onClick:e.v0,children:"Sign In"}),{name:"Dashboard_1"}),c=a(e=>r.jsx("div",{className:"loading",style:e.v0}),{name:"Dashboard_2"}),m=a(e=>r.jsx("button",{className:"btn btn-primary",onClick:e.v0,children:"Retry"}),{name:"Dashboard_3"}),g=a(e=>r.jsx("section",{className:"dashboard",style:e.v0,children:r.jsxs("div",{className:"container",style:e.v1,children:[r.jsxs("div",{className:"dashboard-header",style:e.v2,children:[r.jsxs("div",{children:[r.jsxs("h1",{style:e.v3,children:["Welcome back, ",e.v4]}),r.jsx("p",{style:e.v5,children:"Your deployed automations and usage"})]}),r.jsxs("div",{style:e.v6,children:[e.v7,r.jsx("button",{className:"btn btn-primary",onClick:e.v8,children:"+ Add Automation"})]})]}),e.v9,e.v10]})}),{name:"Dashboard_4",portals:["v4","v7","v9","v10"]}),p=function({user:a,openAuth:p}){const{darkMode:u}=e(),[h,y]=i.useState([]),[x,v]=i.useState(!0),[j,f]=i.useState(null),k=d();i.useEffect(()=>{if(!a)return void v(!1);(async()=>{var e,r;try{f(null);const e=await t.get("/deployments"),r=o("deployments")(e);y(r||[])}catch(a){console.error("Failed to load deployments:",a),f(a);const s=null==(e=null==a?void 0:a.response)?void 0:e.data;(null==(r=null==s?void 0:s.errors)?void 0:r.length)?n(s.errors.map(e=>`${e.field}: ${e.message}`).join(", "),{type:"error"}):n((null==s?void 0:s.message)||"Failed to load deployments",{type:"error"})}finally{v(!1)}})()},[a]);const w=i.useMemo(()=>(e,r="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:r,minimumFractionDigits:0}).format(e),[]),S=(e,a,s)=>r.jsx("section",{style:{padding:"5rem 0",textAlign:"center",color:u?"#e2e8f0":"#1f2937"},children:r.jsxs("div",{className:"container",style:{background:u?"rgba(15,23,42,0.75)":"rgba(255,255,255,0.9)",borderRadius:"1.5rem",padding:"3rem",border:"1px solid "+(u?"rgba(148,163,184,0.25)":"rgba(148,163,184,0.35)"),boxShadow:u?"0 40px 70px rgba(8, 15, 34, 0.55)":"0 40px 70px rgba(148, 163, 184, 0.35)"},children:[r.jsx("h2",{style:{fontSize:"2rem",marginBottom:"1rem"},children:e}),r.jsx("p",{style:{color:u?"#94a3b8":"#475569",marginBottom:"2rem"},children:a}),s]})});return a?x?S("Loading your dashboard","Weâ€™re fetching your latest deployment metrics.",r.jsx(c,{v0:{width:"40px",height:"40px",margin:"0 auto"}})):j&&0===h.length?S("Unable to Load Dashboard","We encountered an issue loading your deployments. Please try again.",r.jsx(m,{v0:()=>window.location.reload()})):r.jsx(g,{v0:{padding:"5rem 0"},v1:{display:"grid",gap:"2rem"},v2:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem",background:u?"rgba(15,23,42,0.75)":"rgba(255,255,255,0.95)",padding:"1.5rem",borderRadius:"1.25rem",border:"1px solid "+(u?"rgba(148,163,184,0.25)":"rgba(148,163,184,0.35)")},v3:{fontSize:"1.8rem",fontWeight:700},v4:a.businessName||a.email,v5:{color:u?"#94a3b8":"#475569"},v6:{display:"flex",alignItems:"center",gap:"0.75rem"},v7:r.jsx(s,{}),v8:()=>k("/marketplace"),v9:0===h.length?r.jsxs("div",{className:"empty-state",style:{textAlign:"center",padding:"4rem",borderRadius:"1.5rem",border:"1px solid "+(u?"rgba(148,163,184,0.25)":"rgba(148,163,184,0.35)"),background:u?"rgba(15,23,42,0.7)":"rgba(255,255,255,0.95)"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem",opacity:.6},children:"ðŸ¤–"}),r.jsx("h3",{style:{fontSize:"1.4rem",marginBottom:"0.5rem"},children:"No Automations Yet"}),r.jsx("p",{style:{color:u?"#94a3b8":"#475569",maxWidth:"400px",margin:"0 auto 1.5rem"},children:"Browse the marketplace to deploy your first AI automation and start transforming your business operations."}),r.jsx("button",{className:"btn btn-primary",onClick:()=>k("/marketplace"),children:"Browse Marketplace"})]}):r.jsx("div",{className:"deployments-list",style:{display:"grid",gap:"1.5rem"},children:h.map(e=>{var a,s,t;const o=(e.status||"active").toLowerCase(),n=b[o]||b.active,i=e.requestLimit?Math.min(100,Math.round(e.requestsUsed/e.requestLimit*100)):null;return r.jsxs("article",{style:{borderRadius:"1.25rem",border:"1px solid "+(u?"rgba(148,163,184,0.25)":"rgba(148,163,184,0.35)"),padding:"1.75rem",background:u?"linear-gradient(145deg, rgba(15,23,42,0.8), rgba(30,41,59,0.85))":"linear-gradient(145deg, rgba(255,255,255,0.97), rgba(241,245,249,0.94))",boxShadow:u?"0 30px 55px rgba(8, 15, 34, 0.45)":"0 30px 55px rgba(148, 163, 184, 0.3)",display:"grid",gap:"1.25rem"},children:[r.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[r.jsxs("div",{children:[r.jsx("h2",{style:{fontSize:"1.35rem",fontWeight:700},children:(null==(a=e.automation)?void 0:a.name)||"Automation"}),r.jsx("p",{style:{color:u?"#94a3b8":"#475569"},children:(null==(s=e.automation)?void 0:s.description)||"Deployed workflow"})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{padding:"0.35rem 0.75rem",borderRadius:"0.75rem",fontSize:"0.8rem",fontWeight:700,textTransform:"uppercase",background:n.bg,color:n.color},children:o}),(null==(t=e.automation)?void 0:t.priceMonthly)&&r.jsxs("span",{style:{color:u?"#cbd5e1":"#475569"},children:[w(e.automation.priceMonthly,e.automation.currency),"/mo"]})]})]}),null!==i&&r.jsxs("div",{style:{display:"grid",gap:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:u?"#cbd5e1":"#475569"},children:[r.jsx("span",{children:"Usage this month"}),r.jsxs("span",{children:[e.requestsUsed,"/",e.requestLimit," (",i,"%)"]})]}),r.jsx("div",{style:{width:"100%",height:"10px",borderRadius:"999px",background:u?"rgba(148,163,184,0.2)":"rgba(148,163,184,0.3)",overflow:"hidden"},children:r.jsx("div",{style:{width:`${i}%`,height:"100%",background:"linear-gradient(90deg, #6366f1, #06b6d4)"}})})]}),e.placeholders&&r.jsxs("details",{style:{background:u?"rgba(15,23,42,0.75)":"rgba(255,255,255,0.95)",borderRadius:"1rem",border:"1px solid "+(u?"rgba(148,163,184,0.2)":"rgba(148,163,184,0.3)"),padding:"1rem 1.25rem"},children:[r.jsx("summary",{style:{cursor:"pointer",fontWeight:600},children:"Configuration Details"}),r.jsx("pre",{style:{marginTop:"0.75rem",background:"rgba(15,23,42,0.85)",color:"#f8fafc",padding:"1rem",borderRadius:"0.85rem",fontFamily:"var(--font-mono)",fontSize:"0.85rem",overflowX:"auto"},children:JSON.stringify(e.placeholders,null,2)})]})]},e.id)})}),v10:j&&h.length>0&&r.jsx("div",{role:"alert",style:{marginTop:"0.5rem",padding:"1rem 1.25rem",borderRadius:"1rem",border:"1px solid "+(u?"rgba(239,68,68,0.4)":"rgba(239,68,68,0.5)"),background:u?"rgba(239,68,68,0.15)":"rgba(254,226,226,0.85)",color:u?"#fca5a5":"#b91c1c",textAlign:"center"},children:"Some data may not be up to date due to a connection issue."})}):S("Authentication Required","Please sign in to access your dashboard.",r.jsx(l,{v0:()=>p("signin")}))},b={active:{bg:"rgba(16,185,129,0.18)",color:"#10b981"},paused:{bg:"rgba(245,158,11,0.18)",color:"#b45309"},error:{bg:"rgba(239,68,68,0.18)",color:"#dc2626"}};export{p as default};
