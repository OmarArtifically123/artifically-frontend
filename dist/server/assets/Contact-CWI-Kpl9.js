var W=Object.defineProperty,J=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var q=(e,i,n)=>i in e?W(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,y=(e,i)=>{for(var n in i||(i={}))Y.call(i,n)&&q(e,n,i[n]);if(I)for(var n of I(i))K.call(i,n)&&q(e,n,i[n]);return e},S=(e,i)=>J(e,U(i));var O=(e,i,n)=>new Promise((t,c)=>{var w=p=>{try{m(n.next(p))}catch(h){c(h)}},v=p=>{try{m(n.throw(p))}catch(h){c(h)}},m=p=>p.done?t(p.value):Promise.resolve(p.value).then(w,v);m((n=n.apply(e,i)).next())});import{jsxs as l,jsx as o}from"react/jsx-runtime";import{useMemo as N,useState as P,useRef as G,useEffect as $}from"react";import{s as a}from"./entry-server-CsfnY5-Y.js";import"react-dom/server";import"react-router-dom/server.mjs";import"stream";import"react-router-dom";import"framer-motion";import"react-dom";import"axios";import"gsap";import"gsap/ScrollTrigger.js";const R={name:"",email:"",topic:"",message:"",contactMethod:"email",timeline:"this-quarter",shareMetrics:!0},B="contact-form-preferences",D="contact-form-topic-history",V=1400,M={name:"Let us know who to address our reply to.",email:"We'll only use this to send the follow-up conversation.",topic:"Share the initiative or question you want to tackle next.",message:"Describe the current workflow and the outcome you're expecting.",contactMethod:"Pick the follow-up channel that works best for your team.",timeline:"This helps us assign the right solution architects to your project.",shareMetrics:"Sharing performance metrics lets us tailor optimization playbooks."},Q=()=>{if(typeof window=="undefined")return{};try{const e=window.localStorage.getItem(B);if(!e)return{};const i=JSON.parse(e);return typeof i=="object"&&i?i:{}}catch(e){return console.warn("Failed to parse stored contact preferences",e),{}}},X=()=>{if(typeof window=="undefined")return[];try{const e=window.localStorage.getItem(D);if(!e)return[];const i=JSON.parse(e);return Array.isArray(i)?i:[]}catch(e){return console.warn("Failed to parse topic history",e),[]}},Z=e=>e.contactMethod!==R.contactMethod||e.timeline!==R.timeline||e.shareMetrics!==R.shareMetrics,g=e=>{if(!e&&e!==0)return"";try{return decodeURIComponent(String(e).replace(/\+/g," "))}catch(i){return String(e)}},_=(e="")=>e.split(/\s+/).filter(Boolean).map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ");function ee(e={}){if(typeof window=="undefined")return{};const i={},n=new URLSearchParams(window.location.search),t=(document.referrer||"").toLowerCase(),c=(E,F)=>{F==null||F===""||e[E]&&String(e[E]).trim()||(i[E]=F)},w=g(n.get("name")||n.get("full_name")||n.get("contact"));c("name",w);const v=g(n.get("email")||n.get("user_email"));c("email",v);const m=g(n.get("topic"))||g(n.get("use_case"))||g(n.get("campaign"));m&&c("topic",_(m));const p=g(n.get("focus")||n.get("need"));p&&!i.topic&&c("topic",_(p)),i.topic||(t.includes("pricing")||n.get("from")==="pricing"?c("topic","Pricing and packaging"):t.includes("docs")||t.includes("api")?c("topic","API integration support"):(t.includes("case-studies")||t.includes("customers"))&&c("topic","Customer success automation"));const h=g(n.get("utm_campaign")),u=g(n.get("company")||n.get("org"))||g(n.get("account"));(!e.message||!e.message.trim())&&(h&&h.toLowerCase().includes("migration")?i.message=`Planning a migration for ${u||"our team"} and want to understand integration requirements and support windows.`:t.includes("pricing")?i.message=`Reviewing pricing and packaging for ${u||"our organization"}. We'd like a quick walkthrough of deployment effort and ROI benchmarks.`:m&&(i.message=`Exploring ${m} automation for ${u||"our team"}. Looking for setup guidance and recommended playbooks.`));const H=g(n.get("timeline")),x=new Date,f=x.getHours(),b=x.getDay()===0||x.getDay()===6;(!e.timeline||e.timeline===R.timeline)&&(H?c("timeline",H):b||f>=18?c("timeline","next-quarter"):f<10?c("timeline","immediate"):c("timeline","this-quarter"));const d=g(n.get("contact_method")||n.get("channel"));return(!e.contactMethod||e.contactMethod===R.contactMethod)&&(d.includes("slack")?c("contactMethod","slack"):(d.includes("video")||d.includes("call")||t.includes("demo"))&&c("contactMethod","video-call")),n.get("share_metrics")==="false"&&c("shareMetrics",!1),i}function ye(){const e=N(()=>Q(),[]),i=N(()=>ee(e),[e]),n=N(()=>y(y(y({},R),i),e),[i,e]),[t,c]=P(n),[w,v]=P(""),[m,p]=P(()=>Z(n)),[h,A]=P(()=>X()),[u,H]=P(null),x=G({}),f=r=>{const{name:s,value:T,type:L,checked:z}=r.target;c(j=>S(y({},j),{[s]:L==="checkbox"?z:T})),d(s)},b=(r,s)=>{typeof s=="string"&&s.trim().length||typeof s=="boolean"&&s||(d(r),x.current[r]=setTimeout(()=>{H(r)},V))},d=r=>{const s=x.current[r];s&&(clearTimeout(s),delete x.current[r]),H(T=>T===r?null:T)},E=r=>{c(s=>S(y({},s),{topic:r})),d("topic")},F=r=>O(this,null,function*(){if(r.preventDefault(),v("loading"),yield new Promise(s=>setTimeout(s,1e3)),v("success"),c(s=>S(y({},s),{topic:"",message:""})),t.topic.trim()){const s=[t.topic.trim(),...h.filter(T=>T!==t.topic.trim())].slice(0,5);A(s),typeof window!="undefined"&&window.localStorage.setItem(D,JSON.stringify(s))}setTimeout(()=>v(""),2500)});return $(()=>{if(typeof window=="undefined")return;const r={name:t.name,email:t.email,contactMethod:t.contactMethod,timeline:t.timeline,shareMetrics:t.shareMetrics},s=window.setTimeout(()=>{window.localStorage.setItem(B,JSON.stringify(r))},150);return()=>window.clearTimeout(s)},[t.name,t.email,t.contactMethod,t.timeline,t.shareMetrics]),$(()=>()=>{Object.values(x.current).forEach(r=>clearTimeout(r))},[]),$(()=>{if(m)return;const r=t.topic.toLowerCase();r&&["integration","api","workflow","security"].some(s=>r.includes(s))&&p(!0)},[t.topic,m]),l("main",{className:"container",style:{padding:`${a("2xl")} 0`,minHeight:"80vh"},children:[l("header",{style:{maxWidth:"720px",margin:`0 auto ${a("xl")}`,textAlign:"center"},children:[o("h1",{style:{fontSize:"2.75rem",fontWeight:800,marginBottom:a("sm")},children:"Contact our team"}),o("p",{style:{color:"var(--gray-400)",fontSize:"1.05rem",lineHeight:1.7},children:"Tell us about your automation initiative and we'll craft a tailored success plan."})]}),o("section",{className:"glass",style:{padding:a("lg"),borderRadius:"16px"},children:l("form",{onSubmit:F,style:{display:"grid",gap:a("fluid-sm")},children:[l("label",{style:{display:"grid",gap:a("xs")},children:[o("span",{children:"Name"}),o("input",{type:"text",name:"name",value:t.name,onChange:f,onFocus:()=>b("name",t.name),onBlur:()=>d("name"),required:!0,style:C}),o(k,{visible:u==="name",children:M.name})]}),l("label",{style:{display:"grid",gap:a("xs")},children:[o("span",{children:"Email"}),o("input",{type:"email",name:"email",value:t.email,onChange:f,onFocus:()=>b("email",t.email),onBlur:()=>d("email"),required:!0,style:C}),o(k,{visible:u==="email",children:M.email})]}),l("label",{style:{display:"grid",gap:a("xs")},children:[o("span",{children:"Topic"}),o("input",{type:"text",name:"topic",value:t.topic,onChange:f,onFocus:()=>b("topic",t.topic),onBlur:()=>d("topic"),placeholder:"Deployment, pricing, partnership...",style:C}),o(k,{visible:u==="topic",children:M.topic}),!!h.length&&l("div",{style:ie,children:[o("span",{style:{color:"var(--gray-400)",fontSize:"0.85rem"},children:"Recent topics:"}),o("div",{style:{display:"flex",flexWrap:"wrap",gap:a("xs")},children:h.map(r=>o("button",{type:"button",onClick:()=>E(r),className:"btn",style:ne,children:r},r))})]})]}),l("label",{style:{display:"grid",gap:a("xs")},children:[o("span",{children:"Message"}),o("textarea",{name:"message",value:t.message,onChange:f,onFocus:()=>b("message",t.message),onBlur:()=>d("message"),rows:4,style:S(y({},C),{resize:"vertical",minHeight:"140px"})}),o(k,{visible:u==="message",children:M.message})]}),l("div",{style:{display:"grid",gap:a("xs",1.5)},children:[o("button",{type:"button",onClick:()=>p(r=>!r),className:"btn",style:{justifySelf:"flex-start",padding:`${a("xs")} ${a("xs",1.75)}`,borderRadius:"10px",background:"rgba(148, 163, 184, 0.15)",color:"var(--gray-100)"},children:m?"Hide advanced planning":"Add rollout preferences"}),m&&l("div",{className:"glass",style:{display:"grid",gap:a("sm"),padding:a("fluid-sm"),borderRadius:"12px",background:"rgba(15, 23, 42, 0.55)"},children:[l("label",{style:{display:"grid",gap:a("2xs",1.5)},children:[o("span",{children:"Preferred contact method"}),l("select",{name:"contactMethod",value:t.contactMethod,onChange:f,onFocus:()=>b("contactMethod",t.contactMethod),onBlur:()=>d("contactMethod"),style:S(y({},C),{appearance:"none"}),children:[o("option",{value:"email",children:"Email"}),o("option",{value:"video-call",children:"Video call"}),o("option",{value:"slack",children:"Shared Slack channel"})]}),o(k,{visible:u==="contactMethod",children:M.contactMethod})]}),l("label",{style:{display:"grid",gap:a("2xs",1.5)},children:[o("span",{children:"Implementation timeline"}),l("select",{name:"timeline",value:t.timeline,onChange:f,onFocus:()=>b("timeline",t.timeline),onBlur:()=>d("timeline"),style:S(y({},C),{appearance:"none"}),children:[o("option",{value:"immediate",children:"Ready to start this month"}),o("option",{value:"this-quarter",children:"Planning this quarter"}),o("option",{value:"next-quarter",children:"Exploring for next quarter"}),o("option",{value:"no-rush",children:"Gathering information"})]}),o(k,{visible:u==="timeline",children:M.timeline})]}),l("label",{style:{display:"flex",gap:a("xs",1.5),alignItems:"flex-start"},children:[o("input",{type:"checkbox",name:"shareMetrics",checked:t.shareMetrics,onChange:f,onFocus:()=>b("shareMetrics",t.shareMetrics),onBlur:()=>d("shareMetrics"),style:{marginTop:a("2xs")}}),l("span",{style:{display:"grid",gap:a("2xs")},children:[o("span",{children:"Share automation performance metrics"}),o("span",{style:{color:"var(--gray-400)",fontSize:"0.85rem",lineHeight:1.5},children:"This helps our solutions team benchmark improvements against similar deployments."}),o(k,{visible:u==="shareMetrics",children:M.shareMetrics})]})]})]})]}),o("button",{type:"submit",className:"btn btn-primary",disabled:w==="loading",style:{padding:`${a("xs",1.5)} ${a("fluid-sm")}`,borderRadius:"12px"},children:w==="loading"?"Sending...":"Submit"}),o("div",{"aria-live":"polite",style:{color:w==="success"?"#34d399":"var(--gray-400)"},children:w==="success"&&"Thanks! We'll reach out shortly."})]})})]})}const C={padding:`${a("xs",1.5)} ${a("sm")}`,borderRadius:"12px",border:"1px solid rgba(148, 163, 184, 0.32)",background:"rgba(15, 23, 42, 0.7)",color:"var(--white)"},te={color:"var(--gray-400)",fontSize:"0.85rem",lineHeight:1.5},ie={display:"grid",gap:a("2xs",1.5)},ne={padding:`${a("2xs",1.5)} ${a("xs",1.5)}`,borderRadius:"999px",background:"rgba(99, 102, 241, 0.16)",border:"1px solid rgba(99, 102, 241, 0.35)",color:"var(--gray-050)"};function k({visible:e,children:i}){return e?o("p",{role:"status",style:te,children:i}):null}export{ye as default};
